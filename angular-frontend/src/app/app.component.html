<div class="container">
  <h1>🌐 WebIntel Analytics</h1>
  <p>AI-powered web intelligence platform for content analysis and question generation</p>

  <div class="form-card" *ngIf="!currentJob">
    <h2>Configuration</h2>
    
    <div class="form-group">
      <label>Website URL</label>
      <input type="url" [(ngModel)]="url" placeholder="https://example.com/help" required>
    </div>

    <div class="form-group">
      <label>Question Types</label>
      <textarea [(ngModel)]="query" rows="3"></textarea>
    </div>

    <div class="form-group">
      <label>Output Filename</label>
      <input type="text" [(ngModel)]="outputFilename">
    </div>

    <button (click)="onSubmit()" [disabled]="!url || isSubmitting" class="btn-primary">
      {{ isSubmitting ? 'Starting...' : 'Start Analysis' }}
    </button>
  </div>

  <div class="status-card" *ngIf="currentJob">
    <h3 *ngIf="currentJob.status === 'pending'">⏳ Job queued...</h3>
    <h3 *ngIf="currentJob.status === 'running'">🔄 Pipeline running...</h3>
    <h3 *ngIf="currentJob.status === 'completed'">✅ Analysis Complete!</h3>
    <h3 *ngIf="currentJob.status === 'failed'">❌ Analysis Failed</h3>
    
    <p>{{ currentJob.message }}</p>
    <p *ngIf="currentJob.error">Error: {{ currentJob.error }}</p>

    <div class="actions" *ngIf="currentJob.status === 'completed' || currentJob.status === 'failed'">
      <button *ngIf="currentJob.status === 'completed'" (click)="downloadResult()" class="btn-primary">
        📥 Download Excel
      </button>
      <button (click)="startNew()" class="btn-secondary">
        {{ currentJob.status === 'completed' ? 'New Analysis' : 'Try Again' }}
      </button>
    </div>
  </div>
</div>
